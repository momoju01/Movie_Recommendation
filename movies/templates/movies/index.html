{% extends 'base.html' %}
{% load static %}

{% block CSS %}
{% load static %}


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.theme.min.css"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


  <style>
    .container {
      m
    }
    .slider-item{
    border: 1px solid #E1E1E1;
    border-radius: 5px;
    background: #FFF;
    }
    .slider-item .slider-image img{
    margin: 0 auto;
    width: 100%;
    }
    .slider-item .slider-main-detail{
    padding: 10px;
    border-radius: 0 0 5px 5px;
    }
    .slider-item:hover .slider-main-detail{
    background-color: #dbeeee !important;
    }
    .slider-item .price{
    float: left;
    margin-top: 5px;
    }
    .slider-item .price h5{
    line-height: 20px;
    margin: 0;
    }
    .detail-price{
    color: #219FD1;
    }
    .slider-item .slider-main-detail .rating{
    color: #777;
    }
    .slider-item .rating{
    float: left;
    font-size: 17px;
    text-align: right;
    line-height: 52px;
    margin-bottom: 10px;
    height: 52px;
    }
    .slider-item .btn-add{
    width: 50%;
    float: left;
    border-right: 1px solid #E1E1E1;
    }
    .slider-item .btn-details{
    width: 50%;
    float: left;
    }
    .controls{
    margin-top: 20px;
    }
    .btn-info,.btn-info:visited,.btn-info:hover{
    background-color: #21BBD8;
    border-color: #21BBD8;
    }
    .btn-info{
    margin-left:5px;
    }
    .slider-main-detail:hover{
    background-color: #dbeeee !important;
    }
    .AddCart{
    margin: 0px;
    padding:5px;
    border-radius:2px;
    margin-right:10px;
    }
    .review {
    margin-bottom: 5px;
    padding-top:5px;
    }
  </style>
{% endblock CSS %}

{% block content %}

<body>
  <h1>Movies</h1>

  <!-- 로그인 유저의 선호 장르 순 -->
  {% if user.is_authenticated %}
    {% if genre_movies %}
      <div>
        <h1>당신이 선호하는 장르의 영화입니다~</h1>
      </div>
      {% for rec_movie_genre in rec_movie_genres %}
        {% for genre, movies in rec_movie_genre.items %}
          {% if movies %}
            <div class="container">
              <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <h2>{{ genre }}</h2>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6 hidden-xs">
                  <div class="controls pull-right">
                    <a class="left fa fa-chevron-left btn btn-info " href="#carousel-example1-{{genre}}" data-slide="prev"></a><a class="right fa fa-chevron-right btn btn-info" href="#carousel-example1-{{genre}}" data-slide="next"></a>
                  </div>
                </div>
              </div>
              <div id="carousel-example1-{{genre}}" class="carousel slide hidden-xs" data-ride="carousel" data-type="multi">
                <div class="carousel-inner">
                  <div div class="item active">
                    <div class="row">
                      {% for movie in movies|slice:":4" %}
                        <div class="col-md-3 col-sm-3 col-xs-12">
                          <a href="{% url 'movies:detail' movie.pk %}">
                            <div class="slider-item">
                              <div class="slider-image">
                              <img src="https://image.tmdb.org/t/p/w500{{movie.poster_path}}" class="img-responsive" alt="">
                              </div>
                              <div class="slider-main-detail">
                                <div class="slider-detail">
                                  <div class="product-detail">
                                    <h5>{{movie.title}}</h5>
                                    <h5 class="detail-price">{{movie.release_date}}</h5>
                                  </div>
                                </div>
                              
                                <div class="cart-section">
                                  <div class="row">
                                    <div class="col-md-6 col-sm-12 col-xs-6 review">
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-6">
                                      <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                  <div class="item">
                    <div class="row">
                      {% for movie in movies|slice:"4:8" %}
                        <div class="col-md-3 col-sm-3 col-xs-12">
                          <a href="{% url 'movies:detail' movie.pk %}">
                            <div class="slider-item">
                              <div class="slider-image">
                              <img src="https://image.tmdb.org/t/p/w500{{movie.poster_path}}" class="img-responsive" alt="">
                              </div>
                              <div class="slider-main-detail">
                                <div class="slider-detail">
                                  <div class="product-detail">
                                    <h5>{{movie.title}}</h5>
                                    <h5 class="detail-price">{{movie.release_date}}</h5>
                                  </div>
                                </div>
                              
                                <div class="cart-section">
                                  <div class="row">
                                    <div class="col-md-6 col-sm-12 col-xs-6 review">
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-6">
                                      <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      {% endfor %}

      {% else %}
        <div class="container">
          <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-12">
            <h2>리뷰를 남기시면 영화를 추천해드려요~</h2>
            </div>
            <div class="col-md-6 col-sm-6 col-xs-6 hidden-xs">
              <div class="controls pull-right">
                <a class="left fa fa-chevron-left btn btn-info " href="#carousel-example3" data-slide="prev"></a><a class="right fa fa-chevron-right btn btn-info" href="#carousel-example3" data-slide="next"></a>
              </div>
            </div>
          </div>
          <div id="carousel-example3" class="carousel slide hidden-xs" data-ride="carousel" data-type="multi">
            <div class="carousel-inner">
              <div div class="item active">
                <div class="row">
                  {% for rated_movie in rated_movies %}
                    <div class="col-md-3 col-sm-3 col-xs-12">
                      <a href="{% url 'movies:detail' rated_movie.pk %}">
                        <div class="slider-item">
                          <div class="slider-image">
                          <img src="https://image.tmdb.org/t/p/w500{{rated_movie.poster_path}}" class="img-responsive" alt="">
                          </div>
                          <div class="slider-main-detail">
                            <div class="slider-detail">
                              <div class="product-detail">
                                <h5>{{rated_movie.title}}</h5>
                                <h5 class="detail-price">{{rated_movie.release_date}}</h5>
                              </div>
                            </div>
                          
                            <div class="cart-section">
                              <div class="row">
                                <div class="col-md-6 col-sm-12 col-xs-6 review">
                                  <i class="fa fa-star" aria-hidden="true"></i>
                                  <i class="fa fa-star" aria-hidden="true"></i>
                                  <i class="fa fa-star" aria-hidden="true"></i>
                                  <i class="fa fa-star-o" aria-hidden="true"></i>
                                  <i class="fa fa-star-o" aria-hidden="true"></i>
                                </div>
                                <div class="col-md-6 col-sm-12 col-xs-6">
                                  <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </a>
                    </div>
                  {% endfor %}
                </div>
              </div>
              <div class="item">
                <div class="row">
                  {% for rated_movie_2 in rated_movies_2 %}
                    <div class="col-md-3 col-sm-3 col-xs-12">
                      <a href="{% url 'movies:detail' rated_movie_2.pk %}">
                        <div class="slider-item">
                          <div class="slider-image">
                          <img src="https://image.tmdb.org/t/p/w500{{rated_movie_2.poster_path}}" class="img-responsive" alt="">
                          </div>
                          <div class="slider-main-detail">
                            <div class="slider-detail">
                              <div class="product-detail">
                                <h5>{{rated_movie_2.title}}</h5>
                                <h5 class="detail-price">{{rated_movie_2.release_date}}</h5>
                              </div>
                            </div>
                          
                            <div class="cart-section">
                              <div class="row">
                                <div class="col-md-6 col-sm-12 col-xs-6 review">
                                  <i class="fa fa-star" aria-hidden="true"></i>
                                  <i class="fa fa-star" aria-hidden="true"></i>
                                  <i class="fa fa-star" aria-hidden="true"></i>
                                  <i class="fa fa-star-o" aria-hidden="true"></i>
                                  <i class="fa fa-star-o" aria-hidden="true"></i>
                                </div>
                                <div class="col-md-6 col-sm-12 col-xs-6">
                                  <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </a>
                    </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endif %}
  {% else %}
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-sm-6 col-xs-12">
        <h2>로그인 하시면 취향에 맞는 영화 추천해줘요~~</h2>
        </div>
        <div class="col-md-6 col-sm-6 col-xs-6 hidden-xs">
          <div class="controls pull-right">
            <a class="left fa fa-chevron-left btn btn-info " href="#carousel-example4" data-slide="prev"></a><a class="right fa fa-chevron-right btn btn-info" href="#carousel-example4" data-slide="next"></a>
          </div>
        </div>
      </div>
      <div id="carousel-example4" class="carousel slide hidden-xs" data-ride="carousel" data-type="multi">
        <div class="carousel-inner">
          <div div class="item active">
            <div class="row">
              {% for rated_movie in rated_movies %}
                <div class="col-md-3 col-sm-3 col-xs-12">
                  <a href="{% url 'movies:detail' rated_movie.pk %}">
                    <div class="slider-item">
                      <div class="slider-image">
                      <img src="https://image.tmdb.org/t/p/w500{{rated_movie.poster_path}}" class="img-responsive" alt="">
                      </div>
                      <div class="slider-main-detail">
                        <div class="slider-detail">
                          <div class="product-detail">
                            <h5>{{rated_movie.title}}</h5>
                            <h5 class="detail-price">{{rated_movie.release_date}}</h5>
                          </div>
                        </div>
                      
                        <div class="cart-section">
                          <div class="row">
                            <div class="col-md-6 col-sm-12 col-xs-6 review">
                              <i class="fa fa-star" aria-hidden="true"></i>
                              <i class="fa fa-star" aria-hidden="true"></i>
                              <i class="fa fa-star" aria-hidden="true"></i>
                              <i class="fa fa-star-o" aria-hidden="true"></i>
                              <i class="fa fa-star-o" aria-hidden="true"></i>
                            </div>
                            <div class="col-md-6 col-sm-12 col-xs-6">
                              <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
              {% endfor %}
            </div>
          </div>
          <div class="item">
            <div class="row">
              {% for rated_movie_2 in rated_movies_2 %}
                <div class="col-md-3 col-sm-3 col-xs-12">
                  <a href="{% url 'movies:detail' rated_movie_2.pk %}">
                    <div class="slider-item">
                      <div class="slider-image">
                      <img src="https://image.tmdb.org/t/p/w500{{rated_movie_2.poster_path}}" class="img-responsive" alt="">
                      </div>
                      <div class="slider-main-detail">
                        <div class="slider-detail">
                          <div class="product-detail">
                            <h5>{{rated_movie_2.title}}</h5>
                            <h5 class="detail-price">{{rated_movie_2.release_date}}</h5>
                          </div>
                        </div>
                      
                        <div class="cart-section">
                          <div class="row">
                            <div class="col-md-6 col-sm-12 col-xs-6 review">
                              <i class="fa fa-star" aria-hidden="true"></i>
                              <i class="fa fa-star" aria-hidden="true"></i>
                              <i class="fa fa-star" aria-hidden="true"></i>
                              <i class="fa fa-star-o" aria-hidden="true"></i>
                              <i class="fa fa-star-o" aria-hidden="true"></i>
                            </div>
                            <div class="col-md-6 col-sm-12 col-xs-6">
                              <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %} 

 <!-- 흥행작 -->
 <h1>흥행작 순</h1>
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-sm-6 col-xs-12">
      <h2>2021 최고의 흥행 영화</h2>
      </div>
      <div class="col-md-6 col-sm-6 col-xs-6 hidden-xs">
        <div class="controls pull-right">
          <a class="left fa fa-chevron-left btn btn-info " href="#carousel-example5" data-slide="prev"></a><a class="right fa fa-chevron-right btn btn-info" href="#carousel-example5" data-slide="next"></a>
        </div>
      </div>
    </div>
    <div id="carousel-example5" class="carousel slide hidden-xs" data-ride="carousel" data-type="multi">
      <div class="carousel-inner">
        <div div class="item active">
          <div class="row">
            {% for popular_movie in popular_movies %}
              <div class="col-md-3 col-sm-3 col-xs-12">
                <a href="{% url 'movies:detail' popular_movie.pk %}">
                  <div class="slider-item">
                    <div class="slider-image">
                    <img src="https://image.tmdb.org/t/p/w500{{popular_movie.poster_path}}" class="img-responsive" alt="">
                    </div>
                    <div class="slider-main-detail">
                      <div class="slider-detail">
                        <div class="product-detail">
                          <h5>{{popular_movie.title}}</h5>
                          <h5 class="detail-price">{{popular_movie.release_date}}</h5>
                        </div>
                      </div>
                    
                      <div class="cart-section">
                        <div class="row">
                          <div class="col-md-6 col-sm-12 col-xs-6 review">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                          </div>
                          <div class="col-md-6 col-sm-12 col-xs-6">
                            <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </a>  
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="item">
          <div class="row">
            {% for popular_movie_2 in popular_movies_2 %}
              <div class="col-md-3 col-sm-3 col-xs-12">
                <a href="{% url 'movies:detail' popular_movie_2.pk %}">
                  <div class="slider-item">
                    <div class="slider-image">
                    <img src="https://image.tmdb.org/t/p/w500{{popular_movie_2.poster_path}}" class="img-responsive" alt="">
                    </div>
                    <div class="slider-main-detail">
                      <div class="slider-detail">
                        <div class="product-detail">
                          <h5>{{popular_movie_2.title}}</h5>
                          <h5 class="detail-price">{{popular_movie_2.release_date}}</h5>
                        </div>
                      </div>
                    
                      <div class="cart-section">
                        <div class="row">
                          <div class="col-md-6 col-sm-12 col-xs-6 review">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                            <i class="fa fa-star-o" aria-hidden="true"></i>
                          </div>
                          <div class="col-md-6 col-sm-12 col-xs-6">
                            <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
 

<!-- 장르별 추천 -->
  <h1>장르별 영화 추천</h1>
      {% for genre_movie in genre_movies %}
        {% for genre, movies in genre_movie.items %}
          {% if movies %}
            <div class="container">
              <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <h2>{{ genre }}</h2>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6 hidden-xs">
                  <div class="controls pull-right">
                    <a class="left fa fa-chevron-left btn btn-info " href="#carousel-example-{{genre}}" data-slide="prev"></a><a class="right fa fa-chevron-right btn btn-info" href="#carousel-example-{{genre}}" data-slide="next"></a>
                  </div>
                </div>
              </div>
              <div id="carousel-example-{{genre}}" class="carousel slide hidden-xs" data-ride="carousel" data-type="multi">
                <div class="carousel-inner">
                  <div div class="item active">
                    <div class="row">
                      {% for movie in movies|slice:":4" %}
                        <div class="col-md-3 col-sm-3 col-xs-12">
                          <a href="{% url 'movies:detail' movie.pk %}">
                            <div class="slider-item">
                              <div class="slider-image">
                              <img src="https://image.tmdb.org/t/p/w500{{movie.poster_path}}" class="img-responsive" alt="">
                              </div>
                              <div class="slider-main-detail">
                                <div class="slider-detail">
                                  <div class="product-detail">
                                    <h5>{{movie.title}}</h5>
                                    <h5 class="detail-price">{{movie.release_date}}</h5>
                                  </div>
                                </div>
                              
                                <div class="cart-section">
                                  <div class="row">
                                    <div class="col-md-6 col-sm-12 col-xs-6 review">
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-6">
                                      <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                  <div class="item">
                    <div class="row">
                      {% for movie in movies|slice:"4:8" %}
                        <div class="col-md-3 col-sm-3 col-xs-12">
                          <a href="{% url 'movies:detail' movie.pk %}">
                            <div class="slider-item">
                              <div class="slider-image">
                              <img src="https://image.tmdb.org/t/p/w500{{movie.poster_path}}" class="img-responsive" alt="">
                              </div>
                              <div class="slider-main-detail">
                                <div class="slider-detail">
                                  <div class="product-detail">
                                    <h5>{{movie.title}}</h5>
                                    <h5 class="detail-price">{{movie.release_date}}</h5>
                                  </div>
                                </div>
                              
                                <div class="cart-section">
                                  <div class="row">
                                    <div class="col-md-6 col-sm-12 col-xs-6 review">
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                      <i class="fa fa-star-o" aria-hidden="true"></i>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-6">
                                      <a href="#" class="AddCart btn btn-info"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add To Cart</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      {% endfor %}



</body>
</html>




<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->
<!------ Include the above in your HEAD tag ---------->




  
{% endblock %}
